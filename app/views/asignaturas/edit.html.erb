<h1>Editando asignatura</h1>
<p id="notice"><%= notice %></p>

<%= form_for(@asignatura) do |f| %>
	<% if @asignatura.errors.any? %>
		<div id="error_explanation">
		  <h2><%= pluralize(@asignatura.errors.count, "error") %> han impedido que esta asignatura se guarde:</h2>

		  <ul>
		  	<% @asignatura.errors.full_messages.each do |message| %>
		    	<li><%= message %></li>
		  	<% end %>
		  </ul>
		</div>
	<% end %>

	<table class="table panel panel-default">
		<tr>
			<td><strong><%= f.label :nombre%></strong></td>
	  		<td><%= f.text_field :nombre, class: "form-control" %></td>
		</tr>
		<tr>
			<td><strong><%= f.label :descripcion %></strong></td>
	  		<td><%= f.text_area :descripcion, class: "form-control" %></td>
		</tr>
		<tr>
			<td><strong>Tags</strong></td>
	  		<td><%= @asignatura.asig_tag_id %></td>
		</tr>
	</table>

	<% if @asignatura.patron_clases.size != 0 %>
		<strong>Esta asignatura contiene las clases:</strong>
		<ul class="list-group">
			<% @asignatura.patron_clases.order(:orden).each do |patron| %>
				<%= content_tag_for(:li, patron, class: "list-group-item") do %>
					<%= link_to patron.clase.nombre, clase_path(patron.clase) %>
					<span class="badge"><%= pluralize(patron.duracion, "día") %></span>
					<%= link_to '', patron, method: :delete, data: { confirm: '¿Estás seguro de que quieres eliminar esta clase de la asignatura?' }, class: "glyphicon glyphicon-trash", title: "Eliminar" %>
				<% end %>
			<% end %>
		</ul>
	<% end %>

	<div class="actions btn-group">
	    <%= f.submit "Aceptar", class: "btn btn-primary" %>
	    <%= link_to 'Inicio', asignaturas_path, class: "btn btn-default" %>
	    <%= link_to 'Volver', @asignatura, class: "btn btn-default" %>
	</div>
<% end %>